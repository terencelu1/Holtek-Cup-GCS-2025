# 數據類型速查表

**版本**: v1.0  
**最後更新**: 2025-11-21

---

## 🔍 快速索引

### 載具 → 中控

| 類別 | ID範圍 | 說明 |
|------|--------|------|
| 基礎狀態 | 0x0100-0x01FF | 心跳、姿態、運動、GPS、高度 |
| 電源狀態 | 0x0200-0x02FF | 電池、充電 |
| 系統狀態 | 0x0300-0x03FF | 負載、日誌、相機 |
| 影像數據 | 0x0400-0x04FF | 鏡頭畫面 |

### 中控 → 載具

| 類別 | ID範圍 | 說明 |
|------|--------|------|
| 控制命令 | 0x1000-0x10FF | 心跳、武裝、模式、RC |
| 導航任務 | 0x1100-0x11FF | 航點、任務控制 |
| 位置分享 | 0x1200-0x12FF | 載具位置廣播 |
| 回應確認 | 0x1080-0x108F | 命令確認、狀態回應 |

---

## 📋 完整數據類型列表

### 載具 → 中控（0x0100 - 0x04FF）

#### 基礎狀態類 (0x0100-0x01FF)

| ID | 名稱 | 數據長度 | 頻率 | 優先級 | 說明 |
|----|------|---------|------|--------|------|
| **0x0101** | 心跳包 | 8 B | 1 Hz | ⭐⭐⭐⭐⭐ | 武裝狀態、飛行模式、系統狀態 |
| **0x0102** | 姿態數據 | 28 B | 20 Hz | ⭐⭐⭐⭐ | Roll/Pitch/Yaw及角速度 |
| **0x0103** | 運動數據 | 24 B | 10 Hz | ⭐⭐⭐⭐ | 速度、航向、油門 |
| **0x0104** | GPS數據 | 28 B | 5 Hz | ⭐⭐⭐⭐ | 座標、高度、衛星數 |
| **0x0105** | 高度數據 | 12 B | 10 Hz | ⭐⭐⭐ | Lidar高度（UAV專用） |

#### 電源狀態類 (0x0200-0x02FF)

| ID | 名稱 | 數據長度 | 頻率 | 優先級 | 說明 |
|----|------|---------|------|--------|------|
| **0x0201** | 電池狀態 | 20 B | 2 Hz | ⭐⭐⭐⭐ | 電壓、電流、溫度、容量 |
| **0x0202** | 充電詳細狀態 | 24 B | 1 Hz | ⭐⭐⭐ | 充電電壓/電流、階段 |

#### 系統狀態類 (0x0300-0x03FF)

| ID | 名稱 | 數據長度 | 頻率 | 優先級 | 說明 |
|----|------|---------|------|--------|------|
| **0x0301** | 系統負載 | 12 B | 2 Hz | ⭐⭐⭐ | CPU、記憶體、運行時間 |
| **0x0302** | 日誌訊息 | 動態 | 事件 | ⭐⭐ | 報錯/事件日誌 |
| **0x0303** | 視覺影像狀態 | 16 B | 1 Hz | ⭐⭐ | 相機在線、解析度、幀率 |

#### 影像數據類 (0x0400-0x04FF)

| ID | 名稱 | 數據長度 | 頻率 | 優先級 | 說明 |
|----|------|---------|------|--------|------|
| **0x0401** | 鏡頭畫面 | 動態 | 5-30 Hz | ⭐ | JPEG壓縮影像串流 |

---

### 中控 → 載具（0x1000 - 0x12FF）

#### 控制命令類 (0x1000-0x10FF)

| ID | 名稱 | 數據長度 | 說明 | 回應 |
|----|------|---------|------|------|
| **0x1001** | 心跳包（中控） | 8 B | 中控在線狀態 | - |
| **0x1002** | 武裝/解除武裝 | 8 B | Arm/Disarm命令 | 0x1080 |
| **0x1003** | 模式切換 | 8 B | 設定飛行模式 | 0x1080 |
| **0x1004** | 設定Home Point | 21 B | 設定返航點 | 0x1080 |
| **0x1005** | RC Override | 16 B | 手動遙控覆蓋 | - |

#### 導航任務類 (0x1100-0x11FF)

| ID | 名稱 | 數據長度 | 說明 | 回應 |
|----|------|---------|------|------|
| **0x1101** | 設定單個航點 | 36 B | 設定航點資訊 | 0x1080 |
| **0x1102** | 任務控制 | 8 B | 開始/暫停/清除任務 | 0x1080 |
| **0x1103** | 查詢航點資訊 | 8 B | 請求航點列表 | 0x1083 |
| **0x1104** | 即時目標點導航 | 24 B | GUIDED模式飛往座標 | 0x1080 |

#### 位置分享類 (0x1200-0x12FF)

| ID | 名稱 | 數據長度 | 說明 | 回應 |
|----|------|---------|------|------|
| **0x1201** | 廣播載具位置 | 24 B | UAV/UGV位置共享 | - |

#### 回應與確認類 (0x1080-0x108F)

| ID | 名稱 | 數據長度 | 說明 |
|----|------|---------|------|
| **0x1080** | 通用命令確認 | 12 B | 命令執行結果 |
| **0x1083** | 航點列表回應 | 動態 | 回應航點查詢 |

---

## 🎯 常用命令組合

### 場景1: 武裝並起飛（UAV）

```
1. 中控 → UAV: 0x1002 (武裝)
   └─ UAV → 中控: 0x1080 (確認成功)

2. 中控 → UAV: 0x1003 (切換至GUIDED模式)
   └─ UAV → 中控: 0x1080 (確認成功)

3. 中控 → UAV: 0x1104 (目標高度10米)
   └─ UAV → 中控: 0x1080 (確認成功)
```

### 場景2: 任務規劃與執行

```
1. 中控 → 載具: 0x1102 (清除現有任務)
   └─ 載具 → 中控: 0x1080 (確認)

2. 中控 → 載具: 0x1101 (設定航點1)
   └─ 載具 → 中控: 0x1080 (確認)

3. 中控 → 載具: 0x1101 (設定航點2)
   └─ 載具 → 中控: 0x1080 (確認)

4. 中控 → 載具: 0x1101 (設定航點N)
   └─ 載具 → 中控: 0x1080 (確認)

5. 中控 → 載具: 0x1003 (切換至AUTO模式)
   └─ 載具 → 中控: 0x1080 (確認)

6. 中控 → 載具: 0x1102 (開始任務)
   └─ 載具 → 中控: 0x1080 (確認)
```

### 場景3: 手動RC控制

```
持續發送（20 Hz）:
中控 → 載具: 0x1005 (RC Override)
  throttle: 50%
  roll: -20%
  pitch: 0%
  yaw: 10%
```

### 場景4: UAV跟隨UGV

```
1. 中控持續接收:
   UGV → 中控: 0x0104 (GPS數據, 5 Hz)

2. 中控廣播:
   中控 → UAV: 0x1201 (UGV位置, 5 Hz)
   
3. 中控設定:
   中控 → UAV: 0x1003 (模式=跟隨, 子模式=跟隨UGV)
```

---

## 📊 數據欄位詳細說明

### 飛行模式代碼

| 代碼 | 名稱 | 說明 | UAV | UGV |
|------|------|------|-----|-----|
| 0x00 | MANUAL | 手動模式 | ✅ | ✅ |
| 0x01 | STABILIZE | 自穩模式 | ✅ | ❌ |
| 0x02 | GUIDED | 導航模式 | ✅ | ✅ |
| 0x03 | AUTO | 自動任務 | ✅ | ✅ |
| 0x04 | LOITER | 盤旋/定點 | ✅ | ✅ |
| 0x05 | RTL | 返航 | ✅ | ✅ |
| 0x06 | LAND | 降落 | ✅ | ❌ |
| 0x07 | HOLD | 保持 | ✅ | ✅ |

### 系統狀態代碼

| 代碼 | 名稱 | 說明 |
|------|------|------|
| 0 | STANDBY | 待機中 |
| 1 | ACTIVE | 運行中 |
| 2 | MISSION | 執行任務中 |
| 3 | ERROR | 錯誤狀態 |

### GPS定位類型

| 代碼 | 名稱 | 說明 | 精度 |
|------|------|------|------|
| 0 | NO_GPS | 無GPS訊號 | - |
| 1 | NO_FIX | GPS無定位 | - |
| 2 | 2D_FIX | 2D定位 | 低 |
| 3 | 3D_FIX | 3D定位 | 中 |
| 4 | DGPS | 差分GPS | 高 |
| 5 | RTK_FLOAT | RTK浮點解 | 很高 |
| 6 | RTK_FIXED | RTK固定解 | 極高 |

### 充電階段

| 代碼 | 名稱 | 說明 |
|------|------|------|
| 0 | NOT_CHARGING | 未充電 |
| 1 | PRECHARGE | 預充階段 |
| 2 | CONSTANT_CURRENT | 恆流充電 |
| 3 | CONSTANT_VOLTAGE | 恆壓充電 |
| 4 | COMPLETE | 充電完成 |

### 航點動作類型

| 代碼 | 名稱 | 說明 |
|------|------|------|
| 0 | WAYPOINT | 經過航點 |
| 1 | LOITER | 停留等待 |
| 2 | TAKE_PHOTO | 拍照 |
| 3 | LAND | 降落 |

### 日誌嚴重程度

| 代碼 | 名稱 | 顏色 | 說明 |
|------|------|------|------|
| 0 | EMERGENCY | 🔴 紅 | 緊急狀況 |
| 1 | ALERT | 🔴 紅 | 警報 |
| 2 | CRITICAL | 🟠 橙 | 嚴重錯誤 |
| 3 | ERROR | 🟠 橙 | 錯誤 |
| 4 | WARNING | 🟡 黃 | 警告 |
| 5 | NOTICE | 🔵 藍 | 通知 |
| 6 | INFO | ⚪ 白 | 資訊 |
| 7 | DEBUG | ⚪ 灰 | 除錯 |

### 命令確認結果

| 代碼 | 名稱 | 說明 |
|------|------|------|
| 0 | SUCCESS | 執行成功 |
| 1 | FAILED | 執行失敗 |
| 2 | IN_PROGRESS | 執行中 |
| 3 | REJECTED | 拒絕執行 |

### 錯誤代碼

| 代碼 | 名稱 | 說明 |
|------|------|------|
| 0x00 | NO_ERROR | 無錯誤 |
| 0x01 | INVALID_PARAM | 參數無效 |
| 0x02 | NOT_ARMED | 未武裝 |
| 0x03 | MODE_NOT_SUPPORTED | 模式不支援 |
| 0x04 | GPS_NOT_FIXED | GPS未定位 |
| 0x05 | LOW_BATTERY | 電池電量不足 |
| 0x06 | SAFETY_CHECK_FAILED | 安全檢查失敗 |
| 0x07 | TIMEOUT | 通訊超時 |
| 0xFF | UNKNOWN_ERROR | 未知錯誤 |

---

## 🔄 數據轉換對照

### 角度單位

| 原始單位 | 轉換 | 顯示單位 |
|---------|------|---------|
| 弧度 (rad) | × 180/π | 度 (°) |
| 度 (°) | × π/180 | 弧度 (rad) |

```python
# 弧度 → 度
degrees = radians * 180 / math.pi

# 度 → 弧度
radians = degrees * math.pi / 180
```

### 座標精度

| 類型 | 數據類型 | 精度 | 說明 |
|------|---------|------|------|
| 緯度/經度 | double (8B) | ~10^-7度 | 約1公分精度 |
| 高度 | float (4B) | ~0.01米 | 1公分精度 |

### RC通道映射

| 通道 | 功能 | 範圍 | 中性值 |
|------|------|------|--------|
| 油門 (Throttle) | 前進/後退 | -100 ~ 100 | 0 |
| 橫滾 (Roll) | 左/右移動 | -100 ~ 100 | 0 |
| 俯仰 (Pitch) | 前/後傾斜 | -100 ~ 100 | 0 |
| 偏航 (Yaw) | 左/右旋轉 | -100 ~ 100 | 0 |

### 時間戳格式

| 類型 | 數據類型 | 單位 | 說明 |
|------|---------|------|------|
| 相對時間 | uint32_t | 毫秒 | 開機後經過的時間 |
| 絕對時間 | uint64_t | 秒 | Unix時間戳 |

---

## 📏 數據包大小參考

### 小型數據包（≤20字節）

```
0x0101 心跳包:        19 字節 (含包頭)
0x0301 系統負載:      23 字節
0x1002 武裝命令:      19 字節
0x1003 模式切換:      19 字節
```

### 中型數據包（20-40字節）

```
0x0102 姿態數據:      39 字節
0x0103 運動數據:      35 字節
0x0104 GPS數據:       39 字節
0x0201 電池狀態:      31 字節
0x0202 充電狀態:      35 字節
0x1004 設定Home:      32 字節
0x1104 目標導航:      35 字節
```

### 大型數據包（＞40字節）

```
0x1101 設定航點:      47 字節
0x0302 日誌訊息:      最多 267 字節
0x0401 影像數據:      最多 65546 字節
```

---

## 🎨 顏色編碼建議（UI顯示）

### 狀態顏色

| 狀態 | 顏色 | 十六進制 |
|------|------|---------|
| 在線 | 🟢 綠色 | #00FF00 |
| 離線 | 🔴 紅色 | #FF0000 |
| 警告 | 🟡 黃色 | #FFFF00 |
| 正常 | 🔵 藍色 | #0000FF |

### 電池電量顏色

| 電量 | 顏色 | 說明 |
|------|------|------|
| 80-100% | 🟢 綠色 | 充足 |
| 50-79% | 🔵 藍色 | 正常 |
| 20-49% | 🟡 黃色 | 偏低 |
| 0-19% | 🔴 紅色 | 危險 |

### GPS狀態顏色

| 定位類型 | 顏色 | 說明 |
|---------|------|------|
| RTK固定 | 🟢 綠色 | 最佳 |
| 3D定位 | 🔵 藍色 | 良好 |
| 2D定位 | 🟡 黃色 | 一般 |
| 無定位 | 🔴 紅色 | 無效 |

---

## 💡 使用提示

### 1. 優先級處理

```
最高優先級 (立即發送):
  - 0x0101 心跳包
  - 0x1001 中控心跳
  - 0x1002 武裝命令

高優先級 (100ms內):
  - 0x0102 姿態數據
  - 0x0104 GPS數據
  - 0x1005 RC Override

中優先級 (500ms內):
  - 0x0201 電池狀態
  - 0x0301 系統負載

低優先級 (1秒內):
  - 0x0302 日誌訊息
  - 0x0303 相機狀態
```

### 2. 頻寬管理

在頻寬受限時（如低速串口），建議調整頻率：
- 姿態數據: 20Hz → 10Hz
- GPS數據: 5Hz → 2Hz
- 運動數據: 10Hz → 5Hz

### 3. 錯誤處理

```
CRC校驗失敗 → 丟棄並記錄
連續3次失敗 → 報警並檢查連線
10次失敗 → 標記為離線
```

### 4. 超時設定

```
心跳包超時: 3秒
RC Override超時: 0.5秒
命令確認超時: 2秒
```

---

## 📖 相關文檔

- [數據格式定義.md](./數據格式定義.md) - 完整協議定義
- [數據格式實現參考.md](./數據格式實現參考.md) - 程式實現範例
- [通訊協議說明.md](./通訊協議說明.md) - MAVLink協議說明
- [指令包_要求.md](./指令包_要求.md) - 需求規格

---

**版本**: v1.0  
**最後更新**: 2025-11-21

